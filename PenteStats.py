#import statsmodels.formula.api as smf
import statsmodels.api as sm
import pandas as pd
from patsy import dmatrices
import numpy as np
from scipy import stats
import pylab as pl
import math
#from matplotlib import pyplot as plt

def main(): 
    df = pd.read_csv('~/Documents/4/PenteData')
    cols_to_keep = ['y','x11','x12','x13','x14','x21','x22','x23','x24']
    #cols_to_keep = ['y','x12','x13','x14','x22','x23','x24']
    data = df[cols_to_keep]
    data['intercept'] = 1.0
    train_cols = data.columns[1:]
    #print data.loc[1:]
    #print train_cols
    logit = sm.Logit(data['y'],data[train_cols])   
    result = logit.fit()
    print result.summary()
    weights = result.params
    print weights
    est = 0
    for x in range(0,3):
        #print x
        print "est +=", x ," * ",weights[x+3], " + ",x," * ",weights[x]
        est += x*weights[x+3] + x*weights[x]
        #print bwCount[1][x],weights[x+4],bwCount[0][x], weights[x]
        #print bwCount[1][x]*weights[x+4] - bwCount[0][x]*weights[x]
        #print weights[8]
    est += weights[6]
    print weights[6]
    print "est: ",est
    est = est * -1
    temp = math.exp(est)
    print temp
    score = 1 / (1 + temp)
    print score

if __name__=='__main__': main()
